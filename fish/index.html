<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">

<!--
==========================================================================

 * Created by tim on 4/19/18.
 
 
 ==========================================================================
fish in fish

    Author:   Tim Erickson

Copyright (c) 2018 by The Concord Consortium, Inc. All rights reserved.

    Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
limitations under the License.
==========================================================================

LOCAL, TESTING:         http://localhost:8888/plugins/fish/?lang=es

On eeps: https://www.eeps.com/codap/fish/fish.html

On greenGeeks:  https://codap.xyz/plugins/fish/fish.html

local plugin only:
    localhost:8888/plugins/fish/

local in local CODAP:
    http://localhost:8888/codap/static/dg/en/cert/index.html?di=http://localhost:8888/plugins/fish/


MySQL general log setup, run this in MYSQL
set global general_log = 'on';
set global general_log_file = '/Users/tim/Desktop/f.log';
SHOW VARIABLES LIKE "general_log%";


todo let regular players know who still has to fish

todo: improve end of game messages
todo: add hysteresis model level
todo: add level with steeper growth curve
todo: add level with more chance to not see enough
todo: fix the end-of-game alert bug

todo: fix bug: at end of game, historical records don't include the very last one. Perhaps only if auto.

-->

<head>
    <meta charset="UTF-8">
    <title>Fish</title>


    <link href='https://fonts.googleapis.com/css?family=Maven+Pro:700,900' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Rokkitt:300, 700' rel='stylesheet'>

    <link rel='stylesheet' type='text/css' href='fish.css'/>

    <script src="../common/iframe-phone.js"></script>
    <script src="../common/codapInterface.js"></script>
    <script src="../common/pluginHelper.js"></script>
    <script src="../common/TEEUtils.js"></script>
    <script src="../common/jqueryFolder/jquery.min.js"></script>
    <script src="../common/jqueryFolder/jquery-ui.min.js"></script>

    <script src="fish.js"></script>

    <script src="fishGameConfigurations.js"></script>
    <script src="fishStrings.js"></script>

    <script src="fireConnect.js"></script>
    <script src="fishCODAPConnector.js"></script>
    <script src="fishUI.js"></script>
    <script src="fishUserActions.js"></script>
    <script src="fishModel.js"></script>
    <script src="fishHistoricalData.js"></script>
<!--
    <script src="whence.js"></script>
-->
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-firestore.js"></script>
    <!--    <script src="https://www.gstatic.com/firebasejs/7.9.0/firebase-analytics.js">-->

</head>

<body onload="fish.initialize()">

<div id="status" class="fishUIblock">
    <div id="statusText">
        $<span class="info" id="statusBalance" title="your current balance"></span> |
        <span class="info" id="statusPlayer" title="your name"></span> |
        <span class="info" id="statusGame" title="this game's code"></span>
    </div>

    <div id="clock">
        <div class="info" id="statusYear">

        </div>
    </div>
</div>

<br>

<div id="joinGame" class="fishUIblock">

    <label id="gameCodeTextFieldLabel" for="gameCodeTextField">xxx GAME CODE xxx</label>
    <input type="text" id="gameCodeTextField" onchange="fish.ui.gameCodeTextFieldChange()">
    <button id="joinGameButton" onclick="fish.userActions.clickJoinButton('join')" value="start new game">
        xxx JOIN xxx
    </button>
    <br>
    <hr>
    <div class="notice">

    </div>
</div>

<div id="needPlayerName" class="fishUIblock">
    <label class="noNameYet" id="playerNameLabel" for="playerName">xxx NAME xxx?</label>
    <input class="noNameYet" type="text" id="playerName">
    <button id="setNameButton" onclick="fish.userActions.pressNameButton('need')" value="setName">xxx SET NAME xxx
    </button>
</div>


<div id="catchFishDIV" class="fishUIblock">
    <span id="catchManualSpan">
        <label id="fishQuantityLabel" for="howManyFish">xxx HOW MANY xxx</label>
        <input type="number" id="howManyFish">
        <button id="catchButton" onclick="fish.userActions.catchFish()"> xxx CATCH xxx</button>
    </span>
    <span id="catchAutoSpan">
        <label id="automateCatchLabel" for="automateCatchCheckbox"> xxx AUTOMATE xxx</label>
        <input type="checkbox" id="automateCatchCheckbox" onchange="fish.ui.update()">
    </span>
</div>


<div id="winLoseDialog" class="fishUIblock">
    <div>
        <span id="winLoseText">Content you want the user to see goes here.</span> <br><br>
        <button id="startNewGameButton" onclick="fish.startWaitingForNewGame()">OK, start a new game</button>
    </div>
</div>

<div id="notice" class="fishUIblock"></div>

<div id="aboutPlayersText" class="fishUIblock"></div>
<div id="debug" class="fishUIblock">
    <span id="debugSpan"></span>
</div>


</body>
</html>